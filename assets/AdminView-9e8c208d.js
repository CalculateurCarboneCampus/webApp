import{d as w,u as g,_ as j,r as f,o,c as n,a as s,t as c,F as _,g as m,w as C,v as S,h as v,i as p,j as h}from"./index-a19e6aa6.js";const D=w({data(){return{dataStore:g(),newProjectName:""}},computed:{user(){return this.dataStore.$state.user},projectsDrafted(){return Object.values(this.dataStore.$state.user.listOfProjects).filter(t=>JSON.parse(t.content.content).status==="draft")},projectsArchived(){return Object.values(this.dataStore.$state.user.listOfProjects).filter(t=>JSON.parse(t.content.content).status==="archive")}},methods:{changeProjectContentStatus(t,a,u){this.dataStore.waitForSavingData=!0;const r=JSON.parse(t.content.content);r.status=a,this.dataStore.user.save({value:r,projectName:u}).then(i=>{i.success?this.dataStore.user.reloadData().then(()=>{this.dataStore.waitForSavingData=!1,this.dataStore.dataHasChange=!1}):this.dataStore.user.error=i.error})},async addCalculation(){const t=await this.dataStore.user.createNewProject(this.dataStore.CCCData,this.newProjectName);t.success&&await this.$router.push({name:"admin.project",params:{userID:this.user.userID,projectSlug:t.slugOfNewProject}})},focusToInput(){this.$refs.nameNewDocumentInput instanceof HTMLInputElement&&this.$refs.nameNewDocumentInput.focus()}}});const N={class:"v-admin-view ccc-with-gutter"},b={class:"ccc-with-gutter"},k={class:"v-admin-view__projects"},I={class:"v-admin-view__projects__item ccc-with-gutter"},P={class:"v-admin-view__projects__item__slug"},$=["onClick"],y=h("notes projet"),O=h("modifier ->"),A={class:"v-admin-view__projects__archived"},E=s("h3",{style:{"margin-top":"5rem"},class:"ccc-with-gutter"},"Ã‰lÃ©ments archivÃ©s",-1),F={class:"v-admin-view__projects__item v-admin-view__projects__item--archived ccc-with-gutter"},T={class:"v-admin-view__projects__item__slug"},V=["onClick"],B=["onClick"],J=s("div",null,"Nouveau Calcul",-1);function M(t,a,u,r,i,H){const l=f("router-link");return o(),n("div",N,[s("h1",b,"Mon espace: "+c(t.dataStore.user.username),1),s("div",k,[(o(!0),n(_,null,m(t.projectsDrafted,e=>(o(),n("div",I,[s("div",P,c(e.slug),1),s("div",null,[s("div",{style:{"margin-right":"1rem"},class:"ccc-ui-button--small v-admin-view__projects__item__button",onClick:d=>t.changeProjectContentStatus(e,"archive",e.slug)},"archiver ðŸ˜´",8,$),v(l,{style:{"margin-right":"1rem"},class:"ccc-ui-button--small v-admin-view__projects__item__button",to:{name:"admin.project",params:{userID:t.user.userID,projectSlug:e.slug,currentEntityName:"RÃ©sultat"}}},{default:p(()=>[y]),_:2},1032,["to"]),v(l,{class:"ccc-ui-button--small v-admin-view__projects__item__button",to:{name:"admin.project",params:{userID:t.user.userID,projectSlug:e.slug}}},{default:p(()=>[O]),_:2},1032,["to"])])]))),256)),s("div",A,[E,(o(!0),n(_,null,m(t.projectsArchived,e=>(o(),n("div",F,[s("div",T,c(e.slug),1),s("div",null,[s("div",{style:{"margin-right":"1rem"},class:"ccc-ui-button--small v-admin-view__projects__item__button",onClick:d=>t.changeProjectContentStatus(e,"draft",e.slug)},"restaurer âš¡",8,V),s("div",{style:{"background-color":"hsl(0 75% 35% / 1)"},class:"ccc-ui-button--small v-admin-view__projects__item__button",onClick:d=>t.changeProjectContentStatus(e,"delete",e.slug)},"supprimer ðŸ’£",8,B)])]))),256))]),s("form",{class:"v-admin-view__add-calculation",onClick:a[2]||(a[2]=(...e)=>t.focusToInput&&t.focusToInput(...e)),onSubmit:a[3]||(a[3]=(...e)=>t.addCalculation&&t.addCalculation(...e))},[s("div",{class:"ccc-ui-circle",onClick:a[0]||(a[0]=(...e)=>t.addCalculation&&t.addCalculation(...e))},"+"),J,C(s("input",{ref:"nameNewDocumentInput",type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>t.newProjectName=e)},null,512),[[S,t.newProjectName]])],32)])])}const R=j(D,[["render",M]]);export{R as default};
