import{d as g,u as f,_ as j,r as C,o as n,c as r,a,t as o,F as m,g as _,f as v,w as S,v as N,h,i as p,j as w}from"./index-8ec036cb.js";const D=g({data(){return{dataStore:f(),newProjectName:"",archiveViewIsOpen:!1}},computed:{archiveViewText(){return this.archiveViewIsOpen?"cacher":"afficher"},user(){return this.dataStore.$state.user},projectsDrafted(){return Object.values(this.dataStore.$state.user.listOfProjects).filter(e=>JSON.parse(e.content.content).status==="draft")},projectsArchived(){return Object.values(this.dataStore.$state.user.listOfProjects).filter(e=>JSON.parse(e.content.content).status==="archive")}},methods:{changeProjectContentStatus(e,s,u){this.dataStore.waitForSavingData=!0;const i=JSON.parse(e.content.content);i.status=s,this.dataStore.user.save({value:i,projectName:u}).then(c=>{c.success?this.dataStore.user.reloadData().then(()=>{this.dataStore.waitForSavingData=!1,this.dataStore.dataHasChange=!1}):this.dataStore.user.error=c.error})},async addCalculation(){const e=await this.dataStore.user.createNewProject(this.dataStore.CCCData,this.newProjectName);e.success&&await this.$router.push({name:"admin.project",params:{userID:this.user.userID,projectSlug:e.slugOfNewProject}})},focusToInput(){this.$refs.nameNewDocumentInput instanceof HTMLInputElement&&this.$refs.nameNewDocumentInput.focus()}}});const I={class:"v-admin-view ccc-with-gutter"},k={class:"ccc-with-gutter"},b={class:"v-admin-view__projects"},V={class:"v-admin-view__projects__item ccc-with-gutter"},$={class:"v-admin-view__projects__item__slug"},y=["onClick"],O=w("notes projet"),P=w("modifier ->"),A={key:1,class:"v-admin-view__projects__archived"},T={class:"v-admin-view__projects__item v-admin-view__projects__item--archived ccc-with-gutter"},E={class:"v-admin-view__projects__item__slug"},F=["onClick"],B=["onClick"],J=a("div",null,"Nouveau calcul",-1);function M(e,s,u,i,c,H){const l=C("router-link");return n(),r("div",I,[a("h1",k,"Mon espace: "+o(e.dataStore.user.username),1),a("div",b,[(n(!0),r(m,null,_(e.projectsDrafted,t=>(n(),r("div",V,[a("div",$,o(t.slug),1),a("div",null,[a("div",{style:{"margin-right":"1rem"},class:"ccc-ui-button--small v-admin-view__projects__item__button",onClick:d=>e.changeProjectContentStatus(t,"archive",t.slug)},"archiver ðŸ˜´",8,y),h(l,{style:{"margin-right":"1rem"},class:"ccc-ui-button--small v-admin-view__projects__item__button",to:{name:"admin.project",params:{userID:e.user.userID,projectSlug:t.slug,currentEntityName:"RÃ©sultat"}}},{default:p(()=>[O]),_:2},1032,["to"]),h(l,{class:"ccc-ui-button--small v-admin-view__projects__item__button",to:{name:"admin.project",params:{userID:e.user.userID,projectSlug:t.slug}}},{default:p(()=>[P]),_:2},1032,["to"])])]))),256)),e.projectsArchived.length>0?(n(),r("h3",{key:0,style:{"margin-top":"5rem","user-select":"none",cursor:"pointer"},class:"ccc-with-gutter",onClick:s[0]||(s[0]=t=>e.archiveViewIsOpen=!e.archiveViewIsOpen)},"Ã‰lÃ©ments archivÃ©s ["+o(e.archiveViewText)+"]",1)):v("",!0),e.archiveViewIsOpen&&e.projectsArchived.length>0?(n(),r("div",A,[(n(!0),r(m,null,_(e.projectsArchived,t=>(n(),r("div",T,[a("div",E,o(t.slug),1),a("div",null,[a("div",{style:{"margin-right":"1rem"},class:"ccc-ui-button--small v-admin-view__projects__item__button",onClick:d=>e.changeProjectContentStatus(t,"draft",t.slug)},"restaurer âš¡",8,F),a("div",{style:{"background-color":"hsl(0 75% 35% / 1)"},class:"ccc-ui-button--small v-admin-view__projects__item__button",onClick:d=>e.changeProjectContentStatus(t,"delete",t.slug)},"supprimer ðŸ’£",8,B)])]))),256))])):v("",!0),a("form",{class:"v-admin-view__add-calculation",onClick:s[3]||(s[3]=(...t)=>e.focusToInput&&e.focusToInput(...t)),onSubmit:s[4]||(s[4]=(...t)=>e.addCalculation&&e.addCalculation(...t))},[a("div",{class:"ccc-ui-circle",onClick:s[1]||(s[1]=(...t)=>e.addCalculation&&e.addCalculation(...t))},"+"),J,S(a("input",{ref:"nameNewDocumentInput",type:"text","onUpdate:modelValue":s[2]||(s[2]=t=>e.newProjectName=t)},null,512),[[N,e.newProjectName]])],32)])])}const R=j(D,[["render",M]]);export{R as default};
